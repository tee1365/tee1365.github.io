<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  
  
  <title>tee1365&#39;s Blog</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
  <meta property="og:type" content="website">
<meta property="og:title" content="tee1365&#39;s Blog">
<meta property="og:url" content="http://tee1365.github.io/index.html">
<meta property="og:site_name" content="tee1365&#39;s Blog">
<meta property="og:locale" content="en_US">
<meta property="article:author" content="tee1365">
<meta name="twitter:card" content="summary">
  
    <link rel="alternate" href="/atom.xml" title="tee1365's Blog" type="application/atom+xml">
  
  
    <link rel="shortcut icon" href="/favicon.png">
  
  
    
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/typeface-source-code-pro@0.0.71/index.min.css">

  
  
<link rel="stylesheet" href="/css/style.css">

  
    
<link rel="stylesheet" href="/fancybox/jquery.fancybox.min.css">

  
<meta name="generator" content="Hexo 6.0.0"></head>

<body>
  <div id="container">
    <div id="wrap">
      <header id="header">
  <div id="banner"></div>
  <div id="header-outer" class="outer">
    <div id="header-title" class="inner">
      <h1 id="logo-wrap">
        <a href="/" id="logo">tee1365&#39;s Blog</a>
      </h1>
      
    </div>
    <div id="header-inner" class="inner">
      <nav id="main-nav">
        <a id="main-nav-toggle" class="nav-icon"></a>
        
          <a class="main-nav-link" href="/">Home</a>
        
          <a class="main-nav-link" href="/archives">Archives</a>
        
      </nav>
      <nav id="sub-nav">
        
          <a id="nav-rss-link" class="nav-icon" href="/atom.xml" title="RSS Feed"></a>
        
        <a id="nav-search-btn" class="nav-icon" title="Search"></a>
      </nav>
      <div id="search-form-wrap">
        <form action="//google.com/search" method="get" accept-charset="UTF-8" class="search-form"><input type="search" name="q" class="search-form-input" placeholder="Search"><button type="submit" class="search-form-submit">&#xF002;</button><input type="hidden" name="sitesearch" value="http://tee1365.github.io"></form>
      </div>
    </div>
  </div>
</header>

      <div class="outer">
        <section id="main">
  
    <article id="post-notice" class="h-entry article article-type-post" itemprop="blogPost" itemscope itemtype="https://schema.org/BlogPosting">
  <div class="article-meta">
    <a href="/2022/06/26/notice/" class="article-date">
  <time class="dt-published" datetime="2022-06-26T22:59:15.000Z" itemprop="datePublished">2022-06-26</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="p-name article-title" href="/2022/06/26/notice/">flicket project notice</a>
    </h1>
  

      </header>
    
    <div class="e-content article-entry" itemprop="articleBody">
      
        <h2 id="1-how-to-type-onChange-for-Select"><a href="#1-how-to-type-onChange-for-Select" class="headerlink" title="1. how to type onChange for Select"></a>1. how to type onChange for Select</h2><p>  gatewayOptions is the value of option for this component.</p>
<p>   <strong>admin(multi)</strong>:  </p>
   <figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">onChange=&#123;<span class="function">(<span class="params">val: <span class="keyword">typeof</span> gatewayOptions[<span class="built_in">number</span>][<span class="string">&quot;value&quot;</span>][]</span>) =&gt;</span> setGateway(val)&#125;</span><br></pre></td></tr></table></figure>

<p>   <strong>admin(not multi)</strong>:  </p>
   <figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">onChange=&#123;<span class="function">(<span class="params">val: <span class="keyword">typeof</span> gatewayOptions[<span class="built_in">number</span>][<span class="string">&quot;value&quot;</span>]</span>) =&gt;</span> setGateway(val)&#125;</span><br></pre></td></tr></table></figure>

<p>   <strong>customer</strong>:</p>
   <figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">onChange=&#123;<span class="function">(<span class="params">val: <span class="keyword">typeof</span> gatewayOptions[<span class="built_in">number</span>]</span>) =&gt;</span> setGateway(val)&#125;</span><br></pre></td></tr></table></figure>

<h2 id="2-add-console-error-as-the-second-parameter-of-handleSubmit"><a href="#2-add-console-error-as-the-second-parameter-of-handleSubmit" class="headerlink" title="2. add console.error as the second parameter of handleSubmit"></a>2. add console.error as the second parameter of handleSubmit</h2><h2 id="3-code-for-repeatable-queue"><a href="#3-code-for-repeatable-queue" class="headerlink" title="3. code for repeatable queue"></a>3. code for repeatable queue</h2><ol>
<li><p>get all repeatable jobs</p>
 <figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">void</span> <span class="built_in">this</span>.automationQueue</span><br><span class="line">  .getRepeatableJobs()</span><br><span class="line">  .then(<span class="function">(<span class="params">res</span>) =&gt;</span> <span class="built_in">console</span>.log(res));</span><br></pre></td></tr></table></figure></li>
<li><p>remove all repeatable jobs</p>
 <figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">  <span class="built_in">void</span> <span class="built_in">this</span>.automationQueue.getRepeatableJobs().then(<span class="function">(<span class="params">res</span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="keyword">for</span> (<span class="keyword">const</span> r <span class="keyword">of</span> res) &#123;</span><br><span class="line">    <span class="built_in">void</span> <span class="built_in">this</span>.automationQueue.removeRepeatableByKey(r.key);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure></li>
</ol>
<h2 id="4-testing"><a href="#4-testing" class="headerlink" title="4. testing"></a>4. testing</h2><ol>
<li><p>test webhook:  </p>
<p> run <code>ngrok http 3001</code><br> run backend<br> <code>https://1197-101-98-116-49.ngrok.io/graphql</code></p>
</li>
<li><p>to test facebook login:</p>
<p> local-ssl-proxy –source 3002 –target 3000<br> <code>https://chiefs.flicket.localhost:3002/</code></p>
</li>
</ol>
<h2 id="5-future-social-module"><a href="#5-future-social-module" class="headerlink" title="5. future social module"></a>5. future social module</h2><ol>
<li><p>Screen recording</p>
<p> create screen recordings, check Best Practices part when recording</p>
<ol>
<li>login flow (admin login)</li>
<li>permission granting (admin login)</li>
<li>Data Usage (mention overview and user social tab)</li>
</ol>
</li>
<li><p>no action after finding a user</p>
</li>
<li><p>every 50 days -&gt; change refresh token automatically</p>
</li>
<li><p>currently igusername can be duplicate in the database</p>
</li>
</ol>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://tee1365.github.io/2022/06/26/notice/" data-id="cl4zb49cq0004a1ong3292mqk" data-title="flicket project notice" class="article-share-link">Share</a>
      
      
      
    </footer>
  </div>
  
</article>



  
    <article id="post-frontend-setup" class="h-entry article article-type-post" itemprop="blogPost" itemscope itemtype="https://schema.org/BlogPosting">
  <div class="article-meta">
    <a href="/2022/01/06/frontend-setup/" class="article-date">
  <time class="dt-published" datetime="2022-01-06T17:33:14.000Z" itemprop="datePublished">2022-01-06</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="p-name article-title" href="/2022/01/06/frontend-setup/">frontend-setup</a>
    </h1>
  

      </header>
    
    <div class="e-content article-entry" itemprop="articleBody">
      
        <h2 id="eslint"><a href="#eslint" class="headerlink" title="eslint"></a>eslint</h2><p><a target="_blank" rel="noopener" href="https://andrebnassis.medium.com/setting-eslint-on-a-react-typescript-project-2021-1190a43ffba">eslint</a><br>npm install eslint –save-dev<br>npx eslint –init<br>npm install eslint-config-airbnb-typescript –save-dev<br>npx install-peerdeps –dev eslint-config-airbnb-typescript<br>npm install –save-dev eslint-config-prettier</p>
<h2 id="react-router"><a href="#react-router" class="headerlink" title="react router"></a>react router</h2><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> history = useHistory();</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">handleClick</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  history.push(<span class="string">&quot;/home&quot;</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="problem"><a href="#problem" class="headerlink" title="problem"></a>problem</h2><ol>
<li><p>We don’t need to import react to use jsx in react 17, although eslint give errors with import</p>
 <figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="string">&quot;react/jsx-uses-react&quot;</span>: <span class="string">&quot;off&quot;</span>,</span><br><span class="line"><span class="string">&quot;react/react-in-jsx-scope&quot;</span>: <span class="string">&quot;off&quot;</span></span><br></pre></td></tr></table></figure></li>
<li><p>Parsing error “parserOptions.project” has been set for @typescript-eslint/parser</p>
<p> Add it to the includes in tsconfig.json</p>
 <figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="string">&quot;include&quot;</span>: [</span><br><span class="line">  <span class="string">&quot;.eslintrc.js&quot;</span>,</span><br><span class="line">]</span><br></pre></td></tr></table></figure></li>
</ol>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://tee1365.github.io/2022/01/06/frontend-setup/" data-id="cl4zb49cn0002a1on43uv2zoj" data-title="frontend-setup" class="article-share-link">Share</a>
      
      
      
    </footer>
  </div>
  
</article>



  
    <article id="post-common" class="h-entry article article-type-post" itemprop="blogPost" itemscope itemtype="https://schema.org/BlogPosting">
  <div class="article-meta">
    <a href="/2022/01/06/common/" class="article-date">
  <time class="dt-published" datetime="2022-01-06T17:23:52.000Z" itemprop="datePublished">2022-01-06</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="p-name article-title" href="/2022/01/06/common/">common</a>
    </h1>
  

      </header>
    
    <div class="e-content article-entry" itemprop="articleBody">
      
        <h2 id="1-type-configuration"><a href="#1-type-configuration" class="headerlink" title="1. type configuration"></a>1. type configuration</h2><p>  Error: Type attribute is set as <code>&quot;postgresql|sqlite....&quot;</code>. If we pass “postgresql” in, then it will seen as a string instead of “postgresql|sqlite….”.</p>
<p>  Since this configuration is consumed by <code>MikroORM.init</code>, we can get the type which should be passed like this. This will solve the error and give us auto code completion.</p>
  <figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</span><br><span class="line">  <span class="attr">dbName</span>: <span class="string">&#x27;lireddit&#x27;</span>,</span><br><span class="line">  <span class="attr">type</span>: <span class="string">&#x27;postgresql&#x27;</span>,</span><br><span class="line">  <span class="attr">debug</span>: !__prod__,</span><br><span class="line">  <span class="attr">entities</span>: [Post],</span><br><span class="line">  <span class="attr">migrations</span>: &#123;</span><br><span class="line">    <span class="attr">path</span>: path.join(__dirname, <span class="string">&#x27;./migrations&#x27;</span>),</span><br><span class="line">    <span class="attr">pattern</span>: <span class="regexp">/^[\w-]+\d+\.[tj]s$/</span>,</span><br><span class="line">  &#125;,</span><br><span class="line">&#125; <span class="keyword">as</span> Parameters&lt;<span class="keyword">typeof</span> MikroORM.init&gt;[<span class="number">0</span>];</span><br></pre></td></tr></table></figure>

<h2 id="2-add-new-type-to-req-session-in-express"><a href="#2-add-new-type-to-req-session-in-express" class="headerlink" title="2. add new type to req.session in express"></a>2. add new type to req.session in express</h2><p>  If we write something like this <code>req.session.userId = user.id;</code>, it will give a error, because there is no <code>userId</code> in the <code>req.session</code>. The type of <code>req.session</code> is set by other libraries, so we need declaration merging to add new types into it. We can write declaration merging like the following code in the file where session is used. The type will be merged into the original type automatically.</p>
  <figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// resolver/user.ts</span></span><br><span class="line"><span class="keyword">declare</span> <span class="built_in">module</span> <span class="string">&#x27;express-session&#x27;</span> &#123;</span><br><span class="line">  <span class="keyword">interface</span> Session &#123;</span><br><span class="line">    <span class="attr">userId</span>: <span class="built_in">number</span>;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://tee1365.github.io/2022/01/06/common/" data-id="cl4zb49ce0000a1oncc1222vh" data-title="common" class="article-share-link">Share</a>
      
      
      
    </footer>
  </div>
  
</article>



  
    <article id="post-sqlite" class="h-entry article article-type-post" itemprop="blogPost" itemscope itemtype="https://schema.org/BlogPosting">
  <div class="article-meta">
    <a href="/2022/01/06/sqlite/" class="article-date">
  <time class="dt-published" datetime="2022-01-06T17:23:00.000Z" itemprop="datePublished">2022-01-06</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="p-name article-title" href="/2022/01/06/sqlite/">sqlite</a>
    </h1>
  

      </header>
    
    <div class="e-content article-entry" itemprop="articleBody">
      
        <h2 id="Add-mock-data-into-sqlite-using-typeorm"><a href="#Add-mock-data-into-sqlite-using-typeorm" class="headerlink" title="Add mock data into sqlite using typeorm"></a>Add mock data into sqlite using typeorm</h2><ol>
<li><p>run command <code>npx typeorm migration:create -n FakePosts</code><br>This will create a blank migration file.</p>
</li>
<li><p>Get mock data from mockaroo<br>set the format to sql, set the table name to the correct one. Last, download the sql file.</p>
</li>
<li><p>modify sql file<br>sqlite have different insert style compared to other databases. So we have to modify the sql file.<br>Some rules we can use:</p>
<ol>
<li><p>replace <code>INSERT INTO artists (name) VALUES</code> to blank, then add it at start.</p>
</li>
<li><p>replace <code>;</code> to <code>,</code>. Don’t forget to add <code>;</code> in the end.</p>
</li>
</ol>
<p>sqlite</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> artists (name)</span><br><span class="line"><span class="keyword">VALUES</span></span><br><span class="line">(&quot;Buddy Rich&quot;),</span><br><span class="line">(&quot;Candido&quot;),</span><br><span class="line">(&quot;Charlie Byrd&quot;);</span><br></pre></td></tr></table></figure>

<p>others</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> artists (name) <span class="keyword">VALUES</span> (&quot;Buddy Rich&quot;);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> artists (name) <span class="keyword">VALUES</span> (&quot;Candido&quot;);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> artists (name) <span class="keyword">VALUES</span> (&quot;Charlie Byrd&quot;);</span><br></pre></td></tr></table></figure></li>
<li><p>create migration folder and move file into it. Modify the file, add <code>await queryRunner.query(``)</code> under up. Then paste sql statement from sql file into ``.</p>
</li>
<li><p>add configuration in index<br>add <code>await connection.runMigrations();</code><br>then add <code>migrations: [path.join(__dirname, &#39;./migrations/*&#39;)]</code> in the connection option</p>
</li>
<li><p>run npm start and check if there is any error</p>
</li>
</ol>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://tee1365.github.io/2022/01/06/sqlite/" data-id="cl4zb49cs0006a1on4p7g6662" data-title="sqlite" class="article-share-link">Share</a>
      
      
      
    </footer>
  </div>
  
</article>



  
    <article id="post-postgresql" class="h-entry article article-type-post" itemprop="blogPost" itemscope itemtype="https://schema.org/BlogPosting">
  <div class="article-meta">
    <a href="/2022/01/06/postgresql/" class="article-date">
  <time class="dt-published" datetime="2022-01-06T17:21:23.000Z" itemprop="datePublished">2022-01-06</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="p-name article-title" href="/2022/01/06/postgresql/">postgresql</a>
    </h1>
  

      </header>
    
    <div class="e-content article-entry" itemprop="articleBody">
      
        <h2 id="postgresql"><a href="#postgresql" class="headerlink" title="postgresql"></a>postgresql</h2><ol>
<li>login<br><code>psql -U postgres -W</code></li>
<li>show all databases<br><code>\l</code></li>
<li>switch to a database<br><code>\c lireddit</code><br>lireddit is database name</li>
<li>createdb<br><code>createdb -U postgres -W lireddit2</code></li>
</ol>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://tee1365.github.io/2022/01/06/postgresql/" data-id="cl4zb49cr0005a1on1keo76co" data-title="postgresql" class="article-share-link">Share</a>
      
      
      
    </footer>
  </div>
  
</article>



  
    <article id="post-nestjs" class="h-entry article article-type-post" itemprop="blogPost" itemscope itemtype="https://schema.org/BlogPosting">
  <div class="article-meta">
    <a href="/2022/01/06/nestjs/" class="article-date">
  <time class="dt-published" datetime="2022-01-06T15:07:28.000Z" itemprop="datePublished">2022-01-06</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="p-name article-title" href="/2022/01/06/nestjs/">nestjs</a>
    </h1>
  

      </header>
    
    <div class="e-content article-entry" itemprop="articleBody">
      
        <h2 id="dynamic-module"><a href="#dynamic-module" class="headerlink" title="dynamic module"></a>dynamic module</h2><p>Dynamic module allows us to create customizable modules. In the following example, <code>HttpModule.register(&#123;&#125;)</code> create a new httpmodule with no configuration. If we don’t do this, we can’t set configuration properly(you may get baseURL from other places even if you set a new baseURL here). <code>TypeOrmModule.forFeature([StoryWebhook])</code> is a dynamic module as well.</p>
<figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Module</span>(&#123;</span><br><span class="line">  <span class="attr">imports</span>: [TypeOrmModule.forFeature([StoryWebhook]),HttpModule.register(&#123;&#125;)],</span><br><span class="line">  <span class="attr">controllers</span>: [SocialController],</span><br><span class="line">  <span class="attr">providers</span>: [SocialService, SocialIgStoryService, SocialHttpService, SocialIgStoryResolver],</span><br><span class="line">  <span class="attr">exports</span>: [SocialService]</span><br><span class="line">&#125;)</span><br><span class="line"><span class="keyword">export</span> <span class="class"><span class="keyword">class</span> <span class="title">SocialModule</span> </span>&#123;&#125;</span><br></pre></td></tr></table></figure>

<h2 id="handle-response-in-http-module"><a href="#handle-response-in-http-module" class="headerlink" title="handle response in http module"></a>handle response in http module</h2>
      
    </div>
    <footer class="article-footer">
      <a data-url="http://tee1365.github.io/2022/01/06/nestjs/" data-id="cl4zb49cp0003a1oncoc177rg" data-title="nestjs" class="article-share-link">Share</a>
      
      
      
    </footer>
  </div>
  
</article>



  
    <article id="post-typeorm" class="h-entry article article-type-post" itemprop="blogPost" itemscope itemtype="https://schema.org/BlogPosting">
  <div class="article-meta">
    <a href="/2022/01/06/typeorm/" class="article-date">
  <time class="dt-published" datetime="2022-01-06T15:07:22.000Z" itemprop="datePublished">2022-01-06</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="p-name article-title" href="/2022/01/06/typeorm/">typeorm</a>
    </h1>
  

      </header>
    
    <div class="e-content article-entry" itemprop="articleBody">
      
        <h2 id="find-relations-option"><a href="#find-relations-option" class="headerlink" title="find relations option"></a>find relations option</h2><p>  If there is a foreign key in the entity and you want to get it, then you need to add a relation option.</p>
  <figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> integration = <span class="keyword">await</span> <span class="built_in">this</span>.integrationRepository.findOne(&#123;</span><br><span class="line">  <span class="attr">where</span>: &#123; instagramId &#125;,</span><br><span class="line">  <span class="attr">relations</span>: [<span class="string">&#x27;organization&#x27;</span>]</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>

<h2 id="steps-for-migration-in-flicket-project"><a href="#steps-for-migration-in-flicket-project" class="headerlink" title="steps for migration in flicket project"></a>steps for migration in flicket project</h2><ol>
<li>run <code>yarn typeorm migration:create -n &quot;&quot;</code>. This will create a blank migration file.</li>
<li>write sql in migration file by yourself</li>
<li>run <code>yarn typeorm migration:run</code> to run the migration</li>
</ol>
<p>  If you want to revert migration, you can run <code>typeorm migration:revert</code>. This will revert the latest migration. If you want to revert multiple migrations, then you need to run it multiple times.</p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://tee1365.github.io/2022/01/06/typeorm/" data-id="cl4zb49ct0007a1on5vmvbts8" data-title="typeorm" class="article-share-link">Share</a>
      
      
      
    </footer>
  </div>
  
</article>



  
    <article id="post-flicket-problem" class="h-entry article article-type-post" itemprop="blogPost" itemscope itemtype="https://schema.org/BlogPosting">
  <div class="article-meta">
    <a href="/2022/01/06/flicket-problem/" class="article-date">
  <time class="dt-published" datetime="2022-01-06T15:07:11.000Z" itemprop="datePublished">2022-01-06</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="p-name article-title" href="/2022/01/06/flicket-problem/">flicket-problem</a>
    </h1>
  

      </header>
    
    <div class="e-content article-entry" itemprop="articleBody">
      
        <h2 id="1-webhook-receive-duplicate-events"><a href="#1-webhook-receive-duplicate-events" class="headerlink" title="1. webhook receive duplicate events"></a>1. webhook receive duplicate events</h2><p>solution: add <code>response.status(200).send(&#39;EVENT_RECEIVED&#39;);</code> in the controller</p>
<figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> webhook(<span class="meta">@Body</span>() body: WebhookMention, <span class="meta">@Res</span>() response: Response): <span class="built_in">void</span> &#123;</span><br><span class="line">  <span class="keyword">switch</span> (body.object) &#123;</span><br><span class="line">    <span class="keyword">case</span> <span class="string">&#x27;instagram&#x27;</span>:</span><br><span class="line">      <span class="keyword">if</span> (<span class="string">&#x27;changes&#x27;</span> <span class="keyword">in</span> body.entry[<span class="number">0</span>]) &#123;</span><br><span class="line">        <span class="keyword">const</span> commentMention = body.entry[<span class="number">0</span>].changes[<span class="number">0</span>];</span><br><span class="line">        <span class="built_in">this</span>.handleCommentMention();</span><br><span class="line">        <span class="built_in">console</span>.log(commentMention);</span><br><span class="line">      &#125; <span class="keyword">else</span> <span class="keyword">if</span> (<span class="string">&#x27;messaging&#x27;</span> <span class="keyword">in</span> body.entry[<span class="number">0</span>]) &#123;</span><br><span class="line">        <span class="keyword">const</span> storyMention = body.entry[<span class="number">0</span>].messaging[<span class="number">0</span>];</span><br><span class="line">        <span class="built_in">this</span>.handleStoryMention(storyMention);</span><br><span class="line">        <span class="built_in">console</span>.log(storyMention);</span><br><span class="line">      &#125;</span><br><span class="line">  &#125;</span><br><span class="line">  response.status(<span class="number">200</span>).send(<span class="string">&#x27;EVENT_RECEIVED&#x27;</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="2-error-message-don’t-show-up-on-form"><a href="#2-error-message-don’t-show-up-on-form" class="headerlink" title="2. error message don’t show up on form"></a>2. error message don’t show up on form</h2><p>solution: change the import controller from components to react-hook-form</p>
<h2 id="3-array-includes-value-value-cannot-be-an-object"><a href="#3-array-includes-value-value-cannot-be-an-object" class="headerlink" title="3. array.includes(value), value cannot be an object"></a>3. array.includes(value), value cannot be an object</h2><p>solution: use lodash some<br><code>tempArr.includes(tempArrItem) -&gt; some(tempArr, tempArrItem)</code></p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://tee1365.github.io/2022/01/06/flicket-problem/" data-id="cl4zb49ck0001a1on6obra2qt" data-title="flicket-problem" class="article-share-link">Share</a>
      
      
      
    </footer>
  </div>
  
</article>



  


</section>
        
          <aside id="sidebar">
  
    

  
    

  
    
  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Archives</h3>
    <div class="widget">
      <ul class="archive-list"><li class="archive-list-item"><a class="archive-list-link" href="/archives/2022/06/">June 2022</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2022/01/">January 2022</a></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Recent Posts</h3>
    <div class="widget">
      <ul>
        
          <li>
            <a href="/2022/06/26/notice/">flicket project notice</a>
          </li>
        
          <li>
            <a href="/2022/01/06/frontend-setup/">frontend-setup</a>
          </li>
        
          <li>
            <a href="/2022/01/06/common/">common</a>
          </li>
        
          <li>
            <a href="/2022/01/06/sqlite/">sqlite</a>
          </li>
        
          <li>
            <a href="/2022/01/06/postgresql/">postgresql</a>
          </li>
        
      </ul>
    </div>
  </div>

  
</aside>
        
      </div>
      <footer id="footer">
  
  <div class="outer">
    <div id="footer-info" class="inner">
      
      &copy; 2022 tee1365<br>
      Powered by <a href="https://hexo.io/" target="_blank">Hexo</a>
    </div>
  </div>
</footer>

    </div>
    <nav id="mobile-nav">
  
    <a href="/" class="mobile-nav-link">Home</a>
  
    <a href="/archives" class="mobile-nav-link">Archives</a>
  
</nav>
    


<script src="/js/jquery-3.4.1.min.js"></script>



  
<script src="/fancybox/jquery.fancybox.min.js"></script>




<script src="/js/script.js"></script>





  </div>
</body>
</html>